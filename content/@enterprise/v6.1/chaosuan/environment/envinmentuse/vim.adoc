---
title: "Vim"
---

vim是Linux环境下一款功能强大、高度可定制的文本编辑工具。

'''''

== 最简流程

[source,bash]
----
vim test #vim 加文件名 ；打开指定文件。
i # “i”进入编辑模式 键盘上下左右键可进行光标移动 选择到修改位置进行编辑；进行文本内容编辑。
:wq！ # ”：“ 进入末行模式; w 保存; q 退出; wq 保存退出; wq!强制保存退出; 修改内容保存。
----

== 工作模式

....
vim 有四种工作模式 正常模式：常用于通过命令操作文件内容，任何模式下Esc 键进入此模式，文件最下端无显示；
                编辑模式：用于文件内容修改，正常模式下 "i" "a" 可进入编辑模式，文件最下端显示"--INSERT--"
                末行模式：用于文件设置，正常模式下 “：” 进入末行模式，文件最下端显示 ”：“
                块模式：用于多行批量选择，正常模式下 ”v“（单字符） ”V“（整行）”Ctrl+v“（块）进入块模式，文件最下端显示"VISUAL...”
....

== 正常模式

[source,bash]
----
移动
xG : 2G 移动至第二行
x% : 50% 移动至文件50% 处
G 移动光标到末行
gg 移动到首行
n空格 :3+空格键 移动到第三个字符
删除
dd 删除光标所在行
xdd : 5dd 从光标往下删除5行
dgg: 从光标起往前删除到文本开头
dG:删除光标到文本文末
复制黏贴
yy 复制当前行
xyy :4yy 复制当前行往下数共四行
p 黏贴
----

== 末行模式

[source,bash]
----
:U  #恢复一整行原来的面貌（文件打开时的文本状态）
:q  #若文件没有修改，直接退出
:q!  #文件已经被修改，放弃修改退出
:wq  #文件已经被修改，保存修改并退出
：wq!#强制保存退出
:e!  #放弃修改，重新回到文件打开时的状态
：set nu #显示行号
:set nonu # 取消显示行号
:1,$s/word1/word2/g 或 :%s/word1/word2/g #从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！(常用)
:1,$s/word1/word2/gc 或 :%s/word1/word2/gc #从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！且在取代前显示提示字符给用户确认 (confirm) 是否需要取代！(常用)
----

== 扩展使用

=== vim 转换 doc ucx

[source,bash]
----
：# “：” 进入末行模式 
:set ff # 查看文本格式
:set ff=dos #转换格式为dos 
:set ff=unix #转换格式为unix 
----

=== 查找

[source,bash]
----
/test #往下搜索
？test #往上搜索
n #查找下一个，
N #查找上一个
----

=== 批量处理

[source,bash]
----
批量注释：
Ctrl + v 进入块选择模式，然后移动光标选中你要注释的行，再按大写的 I 进入行首插入模式输入注释符号如 // 或 #，输入完毕之后，按两下 ESC，Vim 会自动将你选中的所有行首都加上注释，保存退出完成注释。
取消注释：
Ctrl + v 进入块选择模式，选中你要删除的行首的注释符号，注意 // 要选中两个，选好之后按 d 即可删除注释，ESC 保存退出。
方法二: 替换命令
批量注释。
使用下面命令在指定的行首添加注释。
使用名命令格式： :起始行号,结束行号s/^/注释符/g（注意冒号）。
取消注释：
使用名命令格式： :起始行号,结束行号s/^注释符//g（注意冒号）。
----
