---
title: "镜像漏洞扫描"
draft: false
description: 介绍如何对特定镜像或 Harbor 中的所有镜像进行漏洞扫描。
keywords: Harbor, 私有镜像仓库, 镜像仓库, 镜像漏洞扫描
weight: 15
---
Harbor 默认通过开源项目 https://github.com/aquasecurity/trivy[Trivy] （Harbor 2.0.0 及之后版本）或  https://github.com/coreos/clair[Clair] （Habor v2.2.0 版本之后从默认中删除）提供镜像漏洞的静态分析 。

您可以对特定镜像或 Harbor 中的所有镜像手动启动扫描。您也可以设置策略，使系统定期自动扫描所有图像。

include::../../../../../../_components/note.adoc[]

本操作中截图以 Harbor v2.2.1 为例，仅供参考，请以您部署的 Harbor 实际版本为准。

include::../../../../../../_components/table_footer.adoc[]

== 启用默认扫描器

您可以在 link:../../../quickstart/qs10_deploy_harbor/[部署 Harbor 镜像仓库] 时启用 Trivy 或 Clair；若部署时未开启，也可以在 Harbor 集群页面link:../../../manual/config_para/modify_para/[修改配置参数]进行启用。

以 Harbor 2.2.1 版本为例，将**加载 trivy plugin** 修改为 *true*，如下所示：

image::/images/cloud_service/container/harbor/man3015_enable_trivy.png[enable_trivy]

== 扫描特定镜像

. 使用至少具有项目管理员权限的帐户登录 Harbor 界面。
. 进入**项目**页面并选择一个项目。
. 可选：点击**扫描器**页签，可查看到该项目的默认扫描器的详细信息。您可以点击选择扫描器，来选择您已创建的其他扫描器。
+
image::/images/cloud_service/container/harbor/man3015_select_sanner.png[select_sanner]

. 点击**镜像仓库**页签，选择一个仓库源，进入该仓库的 *Artifacts* 页面。
. 勾选一个或多个需要扫描的 *Artifacts* ，单击**扫描**。
+
image::/images/cloud_service/container/harbor/man3015_scan_some.png[scan_some]

== 扫描所有镜像

. 使用具有 Harbor 系统管理员权限的帐户登录 Harbor 界面。
. 选择**系统管理** > *审查服务*，点击**漏洞**页签。
+
image::/images/cloud_service/container/harbor/man3015_scan_all.png[scan_all]

. 点击**开始扫描**便可立即扫描所有镜像。

== 设置自动扫描

. 使用具有 Harbor 系统管理员权限的帐户登录 Harbor 界面。
. 选择**系统管理** > *审查服务*，点击**漏洞**页签。
. 点击**编辑**，设置扫描周期。
+
image::/images/cloud_service/container/harbor/man3015_preiod_scan.png[preiod_scan]

. 单击**保存**。
