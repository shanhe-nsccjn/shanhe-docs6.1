---
title: "步骤一：创建 RocketMQ 集群"
description: 本小节主要介绍如何创建 RocketMQ 集群。
keywords: 云计算,大数据,消息队列,中间件,RocketMQ,rocketMQ,创建集群,快速入门
weight: 10
draft: false
---
本小节主要介绍如何通过管理控制台快速创建 RocketMQ 集群。

== 前提条件

* 已获取管理控制台登录账号和密码，且账号已实名认证。
* 已获取 RocketMQ 集群操作权限。
* 在创建 RocketMQ 集群前，建议先创建好网络资源：
+
先创建一个 VPC 网络，再创建一个受管私有网络并加入 VPC 中，并开启 DHCP 服务（默认开启）。
+

include::../../../../../_components/note.adoc[]

为了保障数据安全，RocketMQ 集群需要运行在受管私有网络中。

include::../../../../../_components/table_footer.adoc[]

== 创建 RocketMQ 集群

. 登录管理控制台。
. 选择**产品与服务** > *消息队列与中间件* > *RocketMQ 服务*，进入 RocketMQ 集群列表页面。
. 点击**立即部署**或**创建**，进入应用部署页面。
. 选择**区域**。
+
根据就近原则，选择实例所在区域。

. 配置实例基本信息、应用版本、网络信息、环境参数等信息。
+
a. <<_基本设置,基本设置>>
+
b. (可选）节点设置，包括<<_名称服务器设置,名称服务器设置>>、<<_broker_设置,Broker 设置>>、<<_网页控制台设置,网页控制台设置>>、<<_客户端设置,客户端设置>>。
+
c. <<_网络设置,网络设置>>
+
d. <<_服务环境参数设置,服务环境参数设置>>
+
e. <<_用户协议,用户协议>>

. 确认配置和费用信息无误后，点击**提交**，创建集群。
+
集群创建成功后，可在**集群管理**页面，查看和管理 RocketMQ 集群。
+
image::/images/cloud_service/middware/rocketmq/rocketmq_cluster_list.png[集群列表]

=== 基本设置

集群名称、版本、计费方式、部署方式等基本信息配置。

[cols="1,4"]
|===
| 参数 | 参数说明

| UUID
| 系统默认分配的全局唯一标识码，不可修改。

| 名称
| （可选）输入当前集群的名称。默认为 `RocketMQ`。

| 描述
| （可选）对集群的简要描述。

| 版本
| 选择集群版本，建议选择最新版本。

| 资源控制组 a| 选择集群节点云服务器规格。

* 可选择``测试环境``和``生产环境``。
* 选择``自定义``，需自定义集群各节点云服务器规格。

| 计费方式 a| 选择集群计费方式，可选择**小时**或**包年包月**。

* 购买有效期：选择**包年包月**计费方式后，需选择可用时长。
* （可选）自动续约：选择**包年包月**计费方式后，可开启自动续约。开启**自动续约**后，需选择续约时长，当您的账户余额充足时，集群到期后将按照选择的续约时长自动续费，保障业务连续性。

| 部署方式 a| 仅**济南1区**区域支持选择部署方式。

* *多可用区部署*：集群所有节点分散部署在当前 region 中的所有 zone，可用性高。
* *单可用部署*：集群所有节点部署在当前 region 中的某一个 zone 中，网络延迟最低。
|===

image::/images/cloud_service/middware/rocketmq/base_setup.png[基本设置]

=== 名称服务器设置

[cols="1,4"]
|===
| 参数 | 参数说明

| CPU
| 选择客户端节点云服务器 CPU 规格。

| 内存
| 选择客户端节点云服务器内存大小。

| 实例类型
| 选择客户端节点类型。支持``基础型``、`企业型 e2`。

| 节点数量
| 选择客户端节点云服务器数量。
|===

image::/images/cloud_service/middware/rocketmq/nameserver_setup.png[名称服务器设置]

=== Broker 设置

[cols="1,4"]
|===
| 参数 | 参数说明

| CPU
| 选择客户端节点云服务器 CPU 规格。

| 内存
| 选择客户端节点云服务器内存大小。

| 实例类型
| 选择客户端节点类型。支持``基础型``、`企业型 e2`。

| 主节点数量
| 选择客户端节点云服务器数量。

| 挂盘容量
| 配置 Broker 节点的磁盘大小。请根据业务量进行设置，可滑动设置或输入数字配置集群磁盘大小。

| 从节点数量
| 每个主节点的从节点数量；从节点的所有配置将和主节点保持一致。
|===

image::/images/cloud_service/middware/rocketmq/broker_setup.png[Broker 设置]

=== 网页控制台设置

[cols="1,4"]
|===
| 参数 | 参数说明

| CPU
| 选择客户端节点云服务器 CPU 规格。

| 内存
| 选择客户端节点云服务器内存大小。

| 实例类型
| 选择客户端节点类型。支持``基础型``、`企业型 e2`。

| 节点数量
| 选择客户端节点云服务器数量。
|===

image::/images/cloud_service/middware/rocketmq/webconsole_setup.png[网页控制台设置]

=== 客户端设置

建议配置客户端节点，否则某些功能无法使用（除非手动下载相关软件包并配置好）。

[cols="1,4"]
|===
| 参数 | 参数说明

| CPU
| 选择客户端节点云服务器 CPU 规格。

| 内存
| 选择客户端节点云服务器内存大小。

| 实例类型
| 选择客户端节点类型。支持``基础型``、`企业型 e2`。

| 节点数量
| 选择客户端节点云服务器数量。
|===

image::/images/cloud_service/middware/rocketmq/client_setup.png[客户端设置]

=== 网络设置

为了保障数据安全，所有的集群都需要部署在受管私有网络中，请选择您创建的网络。

[cols="1,4"]
|===
| 参数 | 参数说明

| VPC网络 a| 选择 VPC 网络。

* 默认适配同区域已有的 VPC 网络。可在下拉框选择已有 VPC 网络。
* 若无可选 VPC 网络，可点击**新建VPC网络**，创建依赖网络资源。
| 私有网络 a| 选择私有网络。

* 默认适配同区域已有的私有网络。可在下拉框选择已有私有网络。
* 若无可选私有网络，可点击**新建私有网络**，创建依赖网络资源。

| 节点 IP a| 配置节点 IP 地址。 

* 默认为``自动分配``。
* 选择``手动配置``需为各节点配置 IP。
|===

image::/images/cloud_service/middware/rocketmq/network_setup.png[网络设置]

=== 服务环境参数设置

按照实际需求配置 RocketMQ 集群的参数。也可以在集群创建成功后，在集群详情页面**配置参数**页签修改参数，详细说明请参见link:../../manual/config_para/modify_para/[修改配置参数]。

image::/images/cloud_service/middware/rocketmq/sevice_parameter.png[服务环境参数设置]

=== 用户协议

阅读**云平台 AppCenter 用户协议**，并勾选用户协议。

image::/images/cloud_service/middware/rocketmq/user_agreement.png[用户协议]

== 配置告警通知

集群创建完成后，请配置告警通知，以便及时了解集群资源的使用情况和集群服务的各项监控指标，当集群、节点、服务有异常时，可以及时获取异常信息。

详细操作请参见link:../../manual/metrics_alarm/set_alarm_rules/[设置监控告警]。
