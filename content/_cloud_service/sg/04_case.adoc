// 安全组配置案例

== 远程连接云服务器

* 远程连接 Windows 云服务器
+
您创建 Windows 云服务器后，需要通过 RDP 远程连接到云服务器，可以配置如下安全组规则。
+
include::../../_components/note.adoc[]
默认安全组中默认配置了该规则，若您使用的默认安全组，无需重复配置。
include::../../_components/table_footer.adoc[]
+
[cols="1,1,1,1,2"]
|===
|方向|行为|协议|端口范围|源 IP

|下行规则|接受|TCP|3389/3389 a|* 全部 IP：0.0.0.0/0 
* 指定 IP：输入指定的 IP 或 IP 地址段

|===

* 远程连接 Linux 云服务器
+
创建 Linux 云服务器后，若需要通过 SSH 远程连接到云服务器，可以配置如下安全组规则。
+
include::../../_components/note.adoc[]
默认安全组中默认配置了该规则，若您使用的默认安全组，无需重复配置。
include::../../_components/table_footer.adoc[]
+
[cols="1,1,1,1,2"]
|===
|方向|行为|协议|端口|源 IP

|下行规则|接受|TCP|22 a|* 全部 IP：0.0.0.0/0 
* 指定 IP：输入指定的 IP 或 IP 地址段
|===

== 公网 ping 云服务器

您创建云服务器后，若需要使用 ping 程序测试与云服务器之间的连通性，可以配置如下安全组规则。
[cols="1,1,1,1,2"]
|===
|方向|行为|协议|端口|源 IP

|下行规则|接受|ICMP|/ a|* 全部 IP：0.0.0.0/0 
* 指定 IP：输入指定的 IP 或 IP 地址段
|===


== 云服务器提供 Web 服务

如果您在实例上搭建了一个 Web 服务网站，希望用户可以通过 HTTP 或者 HTTPS 的方式访问相应服务的端口，例如 HTTP(80)、HTTPS(443)，则需要配置如下安全组规则。

[cols="1,1,1,1,2"]
|===
|方向|行为|协议|端口|源 IP

|下行规则|接受|TCP|80|0.0.0.0/0
|下行规则|接受|TCP|443|0.0.0.0/0
|===

== 允许外部 IP 访问指定端口

您部署业务之后，希望指定的业务端口（例如：3380）可以被外部访问，可以添加如下安全组规则。

[cols="1,1,1,1,2"]
|===
|方向|行为|协议|端口|源 IP

|下行规则 |接受 |TCP |3380 a|* 全部 IP：0.0.0.0/0 
* 指定 IP：输入指定的 IP 或 IP 地址段
|===


== 拒绝外部 IP 访问指定端口

您部署业务之后，希望指定的业务端口（例如：3381）不被外部访问，您可以添加如下安全组规则。

[cols="1,1,1,1,2"]
|===
|方向|行为|协议|端口|源 IP

|下行规则|拒绝|TCP|3381 a|* 全部 IP：0.0.0.0/0 
* 指定 IP：输入指定的 IP 或 IP 地址段
|===

== 只允许云服务器访问特定外部 IP

如果您希望您的云服务器只能访问外部特定的 IP 地址及端口，则可参考如下配置，添加如下两条出方向的安全组规则。

include::../../_components/attention.adoc[]
允许访问的规则优先级应高于拒绝访问的规则优先级。
include::../../_components/table_footer.adoc[]

[cols="1,1,1,1,2"]
|===
|方向|行为|协议|端口|目标 IP

|上行规则|拒绝|ALL|ALL |0.0.0.0/0 
|上行规则|接受|需要使用的协议类型|需要使用的端口|允许云服务器访问的特定公网 IP 地址
|===


== 拒绝云服务器访问特定外部 IP

如果您希望禁止您的云服务器访问外部特定的 IP 地址及端口，则可参考如下配置，添加一条出方向的安全组规则。

[cols="1,1,1,1,2"]
|===
|方向|行为|协议|端口|目标 IP

|上行规则|拒绝|需要使用的协议类型|需要使用的端口|拒绝云服务器访问的特定公网 IP 地址
|===


== 使用 FTP 上传或下载文件

如果您希望使用 FTP 软件向云服务器上传或下载文件，您需要配置如下安全组规则。

[cols="1,1,1,1,2"]
|===
|方向|行为|协议|端口|源 IP

|下行规则|接受 |TCP |20-21 a|* 全部 IP：0.0.0.0/0 
* 指定 IP：输入指定的 IP 或 IP 地址段
|===

